---
alwaysApply: false
description: Guide mÃ©thodologique pour identifier systÃ©matiquement l'origine prÃ©cise d'un bug via hypothÃ¨ses, logs de dÃ©bogage et analyse
---

# RÃ¨gle EnquÃªteur : Identification SystÃ©matique des Bugs ğŸ•µï¸

## Principe Fondamental : Fail-Fast AppliquÃ© au DÃ©bogage

Cette rÃ¨gle implÃ©mente le principe "Fail-Fast" dans le contexte du dÃ©bogage : **identifier rapidement et prÃ©cisÃ©ment l'origine du bug sans le masquer**. L'objectif n'est PAS de rÃ©soudre le bug, mais de le localiser avec une prÃ©cision chirurgicale pour permettre une correction ciblÃ©e.

**Philosophie** : Un bug mal localisÃ© est un bug qui reviendra. Mieux vaut Ã©chouer rapidement avec une origine claire qu'un contournement qui masque la cause racine.

---

## â›”ğŸš«âŒ INTERDICTION ABSOLUE DE CORRECTION âŒğŸš«â›”

**RÃˆGLE CRITIQUE** : L'enquÃªteur doit UNIQUEMENT identifier l'origine du bug. **TOUTE tentative de correction interrompt immÃ©diatement le cycle d'enquÃªte.**

### Interdictions strictes :
- ğŸš« **Ne jamais modifier le code** pour "tester une correction"
- ğŸš« **Ne jamais proposer de solutions** dans le rapport final
- ğŸš« **Ne jamais implÃ©menter de fix** ou workaround
- âŒ **ArrÃªt immÃ©diat** si l'agent commence Ã  corriger au lieu d'enquÃªter

**Rappel constant** : Cette rÃ¨gle **IDENTIFIE**, ne corrige pas. Une fois l'origine claire, c'est Ã  l'utilisateur ou Ã  une autre rÃ¨gle de procÃ©der Ã  la correction.

## ğŸ—ï¸ Architecture de Machine Ã  Ã‰tats Modulaire

### Nouveau SystÃ¨me : Architecture Architect/

Cette rÃ¨gle a Ã©tÃ© **transformÃ©e en une architecture de machine Ã  Ã©tats modulaire** pour garantir un processus de dÃ©bogage rigoureux et fiable. Le systÃ¨me monolithique prÃ©cÃ©dent a Ã©tÃ© dÃ©composÃ© en **8 Ã©tapes interconnectÃ©es** dans le dossier `.cursor/rules/architect/`.

### Pourquoi cette Architecture ?

**ProblÃ¨mes du systÃ¨me prÃ©cÃ©dent** :
- L'agent avait tendance Ã  oublier oÃ¹ il en Ã©tait
- Risque d'abandon prÃ©maturÃ© du processus
- Tentatives de modification de code pendant l'enquÃªte
- Manque de rigueur dans la validation des rÃ©sultats

**Solutions apportÃ©es** :
- âœ… **Machine Ã  Ã©tats stricte** : chaque Ã©tape est autonome et obligatoire
- âœ… **Transitions explicites** : l'agent doit invoquer la rÃ¨gle suivante avec `fetch_rules`
- âœ… **Validation critique externe** : Ã©tape 04b-routing avec agent externe et critique
- âœ… **Reminder standardisÃ©** : rappel constant des rÃ¨gles dans chaque Ã©tape

## ğŸ”„ Processus MÃ©thodologique en 8 Ã‰tapes

### Vue d'Ensemble du SystÃ¨me Ã  Ã‰tats

```
00-start (point d'entrÃ©e)
  â†“
01a-explore       # Exploration des fichiers de code
  â†“
01b-hypotheses    # Formulation d'hypothÃ¨ses prÃ©cises
  â†“
02-logs           # Placement de logs de dÃ©bogage
  â†“
03-execute        # ExÃ©cution et rÃ©cupÃ©ration des logs
  â†“
04-analyze        # Analyse des rÃ©sultats
  â†“
04b-routing       # Validation critique externe - Agent neutre et critique
  â†“ (conditions multiples)
  â”œâ†’ 01a-explore (si exploration insuffisante)
  â”œâ†’ 01b-hypotheses (si hypothÃ¨ses incorrectes)
  â”œâ†’ 02-logs (si logs insuffisants ou fonction locale)
  â””â†’ 05-report (si validation complÃ¨te)
```

### CaractÃ©ristiques ClÃ©s de l'Architecture

#### 1. **Machine Ã  Ã‰tats Stricte**
- **INTERDICTION ABSOLUE** de mÃ©langer ou sauter des Ã©tapes
- **OBLIGATION** de marquer explicitement le titre de l'Ã©tape actuelle
- **Chaque Ã©tape** a un objectif prÃ©cis et ne peut pas Ãªtre contournÃ©e

#### 2. **Transitions Explicites**
- L'agent DOIT invoquer la rÃ¨gle suivante avec `fetch_rules`
- Chaque rÃ¨gle indique clairement quelle rÃ¨gle invoquer ensuite
- La rÃ¨gle 04b-routing offre 4 chemins possibles selon les rÃ©sultats

#### 3. **Validation Critique Externe (04b-routing)**
- **Agent externe et critique** qui analyse le travail de l'agent prÃ©cÃ©dent
- **MÃ©fiance systÃ©matique** face aux tentatives d'arrÃªt prÃ©maturÃ©
- **RÃ©sistance Ã  la pression** pour Ã©viter les gÃ©nÃ©ralisations vagues
- **Score de profondeur** (0-10) pour Ã©valuer la qualitÃ© du diagnostic

#### 4. **Reminder StandardisÃ©**
- Chaque rÃ¨gle (01a Ã  05) commence par un rappel identique
- Interdictions absolues rÃ©pÃ©tÃ©es dans chaque Ã©tape
- Machine Ã  Ã©tats clairement affichÃ©e

## ğŸ¯ Comment Utiliser cette Architecture

### Activation du SystÃ¨me

**Pour dÃ©marrer une enquÃªte de bug** :

1. **Invoquer cette rÃ¨gle** : `fetch_rules` avec `enqueteur`
2. **Contextualiser** : Fournir la description du bug et les conditions de reproduction
3. **DÃ©marrer la machine Ã  Ã©tats** : Invoquer `fetch_rules` avec `00-start`
4. **Suivre le processus** : L'agent suivra automatiquement les 8 Ã©tapes dans l'ordre

### Exemple d'Activation

```
Utilisateur : "Utilise la rÃ¨gle enquÃªteur pour identifier l'origine de ce bug : 
le systÃ¨me retourne une erreur 500 quand j'essaie de me connecter"

Agent : [Invoque cette rÃ¨gle, puis] 
â†’ Invoque `fetch_rules` avec `00-start`
â†’ Suit automatiquement : 01a-explore â†’ 01b-hypotheses â†’ 02-logs â†’ 03-execute â†’ 04-analyze â†’ 04b-routing
â†’ [Selon la dÃ©cision critique] â†’ 05-report OU retour vers une Ã©tape prÃ©cÃ©dente
```

## ğŸ“ Structure des Fichiers Architect/

```
.cursor/rules/architect/
â”œâ”€â”€ 00-start.mdc          # Point d'entrÃ©e : explique le systÃ¨me Ã  Ã©tats
â”œâ”€â”€ 01a-explore.mdc       # Exploration des fichiers de code
â”œâ”€â”€ 01b-hypotheses.mdc    # Formulation d'hypothÃ¨ses prÃ©cises
â”œâ”€â”€ 02-logs.mdc           # Placement de logs de dÃ©bogage
â”œâ”€â”€ 03-execute.mdc        # ExÃ©cution et rÃ©cupÃ©ration des logs
â”œâ”€â”€ 04-analyze.mdc        # Analyse des rÃ©sultats
â”œâ”€â”€ 04b-routing.mdc       # Validation critique externe
â””â”€â”€ 05-report.mdc         # Rapport final
```

## âš ï¸ RÃ¨gles de la Machine Ã  Ã‰tats

### RÃ¨gles de fonctionnement obligatoires :
- âœ… **UNIQUEMENT** effectuer les actions dÃ©crites dans la rÃ¨gle actuelle
- âŒ **INTERDICTION ABSOLUE** de faire autre chose (mÃªme si Ã§a semble utile)
- âŒ **INTERDICTION ABSOLUE** de modifier le code pour corriger (uniquement identifier)
- âœ… **OBLIGATION** d'invoquer la rÃ¨gle suivante en fin d'Ã©tape avec l'outil `fetch_rules`

### Indication Obligatoire de l'Ã‰tape

L'agent DOIT **toujours** indiquer son Ã©tape actuelle avec des titres markdown explicites :
- `## Ã‰tape 01a : Exploration des fichiers de code`
- `## Ã‰tape 01b : Formulation d'hypothÃ¨ses`
- `## Ã‰tape 02 : Placement de logs de dÃ©bogage`
- `## Ã‰tape 03 : ExÃ©cution et rÃ©cupÃ©ration des logs`
- `## Ã‰tape 04 : Analyse des rÃ©sultats`
- `## Ã‰tape 04b : Validation critique externe`
- `## Ã‰tape 05 : Rapport final`

**RÃ¨gle de Machine Ã  Ã‰tat** : Lors des retours/redirections, l'agent DOIT marquer le titre correspondant pour indiquer clairement qu'il change d'Ã©tat.

## ğŸš€ Activation ImmÃ©diate

**Pour commencer l'enquÃªte, invoquez immÃ©diatement la premiÃ¨re rÃ¨gle de la machine Ã  Ã©tats :**

**Prochaine Ã©tape** : Invoquer la rÃ¨gle `00-start` avec l'outil `fetch_rules` pour dÃ©marrer le processus d'enquÃªte en 8 Ã©tapes.

---

## Transitions Possibles

**Toujours vers** : `00-start` - Point d'entrÃ©e de la machine Ã  Ã©tats d'enquÃªte

**Action requise** : Une fois cette rÃ¨gle invoquÃ©e et le contexte du bug fourni, invoquer `fetch_rules` avec le nom `00-start` pour commencer le processus d'enquÃªte systÃ©matique.