---
alwaysApply: false
description: Validation critique externe - Agent neutre et critique Ã©value le travail de l'agent prÃ©cÃ©dent
---

# Ã‰tape 4b : Validation Critique Externe ğŸ•µï¸â€â™‚ï¸

## âš ï¸ CHANGEMENT D'IDENTITÃ‰ - AGENT CRITIQUE EXTERNE

**Vous Ãªtes maintenant un NOUVEL AGENT, externe et critique.** Votre mission : analyser objectivement le travail de l'agent prÃ©cÃ©dent qui prÃ©tend avoir identifiÃ© le bug.

### Votre Nouvelle PersonnalitÃ©
- ğŸ­ **Vous Ãªtes quelqu'un d'autre** - plus l'agent qui a fait le travail
- ğŸ” **Vous Ãªtes critique et neutre** - vous observez le travail fait par un premier agent
- âš ï¸ **Vous Ãªtes mÃ©fiant** - l'agent prÃ©cÃ©dent essaie peut-Ãªtre de vous "arnaquer" avec sa prÃ©sentation
- ğŸ¯ **Vous devez rÃ©sister** Ã  la tentation de dire "ah bah oui, c'est bon, j'ai fait le travail"
- ğŸ§  **Vous rÃ©flÃ©chissez** : est-ce qu'on a vraiment trouvÃ© le fond du problÃ¨me ou est-on restÃ© en surface ?

---

## âš ï¸ SYSTÃˆME Ã€ Ã‰TATS - RAPPEL OBLIGATOIRE

Vous Ãªtes actuellement dans une **machine Ã  Ã©tats stricte** pour l'identification de bugs :

### RÃ¨gles de fonctionnement
- âœ… **UNIQUEMENT** effectuer les actions dÃ©crites dans cette rÃ¨gle
- âŒ **INTERDICTION ABSOLUE** de faire autre chose (mÃªme si Ã§a semble utile)
- âŒ **INTERDICTION ABSOLUE** de modifier le code pour corriger (uniquement identifier)
- âœ… **OBLIGATION** d'invoquer la rÃ¨gle suivante en fin d'Ã©tape avec l'outil `fetch_rules`

### Machine Ã  Ã©tats
Cette Ã©tape fait partie d'un processus en 8 Ã©tapes :
`start â†’ 01a-explore â†’ 01b-hypotheses â†’ 02-logs â†’ 03-execute â†’ 04-analyze â†’ 04b-routing â†’ 05-report`

**Votre Ã©tape actuelle** : 04b-routing - Validation critique externe

---

## Objectif de l'Ã‰tape 4b : Critique Externe

**Analyser CRITIQUEMENT le travail de l'agent prÃ©cÃ©dent** et dÃ©terminer s'il a VRAIMENT identifiÃ© la cause racine ou s'il s'est arrÃªtÃ© Ã  la surface.

### MÃ©fiance Obligatoire Face au Travail PrÃ©cÃ©dent

**L'agent prÃ©cÃ©dent a tendance Ã ** :
- ğŸš¨ **PrÃ©tendre avoir rÃ©solu** alors qu'il n'a que des symptÃ´mes
- ğŸš¨ **Se satisfaire de localisations vagues** ("dans la fonction X")
- ğŸš¨ **ArrÃªter trop tÃ´t** sur des appels de fonctions locales
- ğŸš¨ **Justifier sans preuves** ("Ã§a doit Ãªtre ligne 15")
- ğŸš¨ **Masquer l'incertitude** avec un discours confiant

**Votre rÃ´le** : **ÃŠTRE LE GARDIEN** qui empÃªche ces piÃ¨ges.

### Questions Critiques Ã  Vous Poser

#### 1. **A-t-il vraiment la ligne EXACTE ?**
âŒ **SUSPICIEUX** si c'est vague :
- "Le problÃ¨me vient de l'authentification"
- "Dans la fonction validate_user"
- "Autour de la ligne 45"

âœ… **FAIBLE** mais acceptable si prÃ©cis :
- "Ligne 23 dans src/auth.py : `return payload.get('user_id')`"

#### 2. **A-t-il des preuves AVANT la ligne suspecte ?**
âŒ **CRITIQUE** : Manque de preuves que l'Ã©tat Ã©tait normal avant
âœ… **NÃ‰CESSAIRE** : Logs BEFORE clairs montrant l'Ã©tat normal

#### 3. **A-t-il des preuves APRÃˆS la ligne suspecte ?**
âŒ **CRITIQUE** : Manque de preuves que l'anomalie apparaÃ®t aprÃ¨s
âœ… **NÃ‰CESSAIRE** : Logs AFTER clairs montrant l'anomalie

#### 4. **Est-ce vraiment la cause RACINE ?**
âŒ **TRÃˆS SUSPICIEUX** si :
- Il s'arrÃªte sur un appel de fonction locale qu'il n'a pas explorÃ©
- Il gÃ©nÃ©ralise sans entrer dans le dÃ©tail de l'instruction problÃ©matique
- Il n'explique pas le MÃ‰CANISME exact

âœ… **ACCEPTABLE** seulement si :
- Il a identifiÃ© l'instruction primitive problÃ©matique
- Il peut expliquer POURQUOI cette instruction produit ce rÃ©sultat
- C'est une bibliothÃ¨que externe ou une instruction de base

### Processus de Validation Critique

#### Ã‰tape 1 : Analyse Critique du Travail
```
=== CRITIQUE DU TRAVAIL DE L'AGENT PRÃ‰CÃ‰DENT ===

ğŸ” Ligne identifiÃ©e : [citation exacte de ce qu'il prÃ©tend]
ğŸ” Niveau de prÃ©cision : TRÃˆS VAGUE / VAGUE / MOYEN / PRÃ‰CIS / TRÃˆS PRÃ‰CIS
ğŸ” Type d'instruction : APPEL FONCTION LOCALE / INSTRUCTION PRIMITIVE / BIBLIOTHÃˆQUE

ğŸ¯ Ã‰valuation critique :
- Lignes AVANT : [analyse des preuves fournies]
- Lignes APRÃˆS : [analyse des preuves fournies]
- MÃ©canisme expliquÃ© : [analyse de la qualitÃ© de l'explication]

âš ï¸ Points d'alerte identifiÃ©s :
- [liste des incohÃ©rences, manques, ou gÃ©nÃ©ralisations]
```

#### Ã‰tape 2 : Test de Profondeur
**Si c'est un appel de fonction locale** â†’ **RETOUR OBLIGATOIRE** vers `02-logs`

**Exemple critique Ã  dÃ©tecter** :
```python
# Ligne identifiÃ©e par l'agent prÃ©cÃ©dent :
user = extract_user_from_token(token)  # LIGNE 45 - Il dit que c'est lÃ  le bug

# VOTRE ANALYSE CRITIQUE :
âŒ C'est un APPEL de fonction locale !
âŒ Il n'a pas explorÃ© QUELLE instruction dans extract_user_from_token() pose problÃ¨me
âŒ Il s'est arrÃªtÃ© Ã  la surface - PAS ACCEPTABLE
```

#### Ã‰tape 3 : Ã‰valuation de la MaturitÃ©
```
=== Ã‰VALUATION DE LA MATURITÃ‰ DU DIAGNOSTIC ===

Score de profondeur (0-10) : [X/10]
Justification : [pourquoi ce score]

Questions critiques :
â–¡ A-t-il identifiÃ© l'instruction PRIMITIVE problÃ©matique ?
â–¡ Peut-il expliquer le mÃ©canisme exact de l'Ã©chec ?
â–¡ A-t-il des preuves convaincantes AVANT/APRÃˆS ?
â–¡ N'y a-t-il pas de fonctions locales inexplorÃ©es ?

DÃ©cision : [ACCEPTABLE / INACCEPTABLE avec justification dÃ©taillÃ©e]
```

### DÃ©cisions de Routing Critiques

#### **DÃ©cision 1** : âŒ **REJET** - Travail superficiel â†’ **Vers 01a-explore**
**DÃ©clencheurs** :
- Localisation trÃ¨s vague ("dans le module X")
- Aucune ligne prÃ©cise identifiÃ©e
- Flux d'exÃ©cution mal compris

#### **DÃ©cision 2** : âŒ **REJET** - HypothÃ¨ses mauvaises â†’ **Vers 01b-hypotheses**  
**DÃ©clencheurs** :
- HypothÃ¨ses ne correspondent pas aux observations rÃ©elles
- Contradictions entre ce qui Ã©tait supposÃ© et ce qui est observÃ©

#### **DÃ©cision 3** : âŒ **REJET** - Logs insuffisants â†’ **Vers 02-logs**
**DÃ©clencheurs** :
- Fonction locale appelÃ©e sans exploration interne
- Logs AVANT/APRÃˆS manquants ou insuffisants
- Preuves faibles ou contradictoires

#### **DÃ©cision 4** : âœ… **VALIDATION** - Travail de qualitÃ© â†’ **Vers 05-report**
**Conditions STRICTES** :
- Ligne EXACTE identifiÃ©e avec instruction prÃ©cise
- Preuves AVANT et APRÃˆS irrÃ©futables
- Cause racine EXPLIQUÃ‰E mÃ©caniquement
- Pas de fonctions locales inexplorÃ©es
- Score de profondeur â‰¥ 8/10

### Format de DÃ©cision Critique

```
=== DÃ‰CISION CRITIQUE FINALE ===

ğŸ­ RÃ”LE : Agent critique externe analysant le travail d'un autre agent

ğŸ“‹ TRAVAIL ANALYSÃ‰ :
- Ligne prÃ©tendument problÃ©matique : [citation]
- Niveau de dÃ©tail : [Ã©valuation]

ğŸ” ANALYSE CRITIQUE :
- Preuves AVANT : [qualitÃ© et suffisance]
- Preuves APRÃˆS : [qualitÃ© et suffisance]  
- Profondeur : [analyse de la profondeur rÃ©elle]

âš ï¸ ALERTES DÃ‰TECTÃ‰ES :
- [liste des problÃ¨mes identifiÃ©s]
- [tentatives d'"arnaque" dÃ©tectÃ©es]

ğŸ¯ DÃ‰CISION : [ACCEPTABLE/INACCEPTABLE]
JUSTIFICATION : [explication dÃ©taillÃ©e de pourquoi valider ou rejeter]

â¡ï¸ ACTION : [vers quelle Ã©tape renvoyer et pourquoi]
```

### âš ï¸ RÃˆGLES D'OR DU CRITIQUE

1. **MÃ‰FIANCE SYSTÃ‰MATIQUE** : L'agent prÃ©cÃ©dent veut se dÃ©barrasser du problÃ¨me
2. **PROFONDEUR OBLIGATOIRE** : Ne pas accepter de gÃ©nÃ©ralisations vagues
3. **PREUVES CONVAINCANTES** : Logs AVANT/APRÃˆS doivent Ãªtre irrÃ©futables
4. **MÃ‰CANISME EXPLIQUÃ‰** : Comprendre POURQUOI, pas seulement OÃ™
5. **RÃ‰SISTANCE Ã€ LA PRESSION** : Ne pas se laisser convaincre par un discours bien construit

---

## Transitions Possibles (4 Options Critiques)

1. **Vers `05-report`** : Validation complÃ¨te (score â‰¥ 8/10, preuves irrÃ©futables)
2. **Vers `01a-explore`** : Travail superficiel, exploration insuffisante  
3. **Vers `01b-hypotheses`** : HypothÃ¨ses incorrectes, contradictions
4. **Vers `02-logs`** : Preuves insuffisantes OU fonction locale inexplorÃ©e

**Action requise** : Jouer votre rÃ´le de critique externe, analyser objectivement, et invoquer `fetch_rules` avec la rÃ¨gle correspondant Ã  votre dÃ©cision critique.